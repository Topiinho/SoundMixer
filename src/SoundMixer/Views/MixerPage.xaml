<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SoundMixer.Views.MixerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SoundMixer.Core.Models">

    <Grid Padding="20" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <StackPanel Spacing="20">
            <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Left">
                <Button Content="â† Voltar" Command="{x:Bind ViewModel.GoBackCommand}"/>
            </StackPanel>
            <TextBlock Text="Mixer" Style="{StaticResource TitleTextBlockStyle}"/>
            <StackPanel Orientation="Horizontal" Spacing="10">
                <Button Content="Atualizar Aplicativos" Width="150" Command="{x:Bind ViewModel.LoadApplicationsCommand}"/>
                <Button Content="Atualizar Dispositivos" Width="150" Command="{x:Bind ViewModel.LoadDevicesCommand}"/>
            </StackPanel>
            <ListBox Height="400" ItemsSource="{x:Bind ViewModel.ActiveApplications}">
                <ListBox.ItemTemplate>
                    <DataTemplate x:DataType="local:AudioApplication">
                        <Grid Padding="12" ColumnSpacing="12" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderThickness="0,0,0,1" BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Spacing="4">
                                <TextBlock Text="{x:Bind ProcessName}" FontWeight="SemiBold" MaxLines="1" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Text="{x:Bind ProcessId}" FontSize="12" Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" Spacing="4" VerticalAlignment="Center" Margin="0,0,12,0">
                                <Slider Value="{x:Bind Volume, Mode=OneWay}" Minimum="0" Maximum="1" IsEnabled="False"/>
                                <TextBlock Text="{x:Bind Volume}" FontSize="12" Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"/>
                            </StackPanel>
                            <ToggleButton Grid.Column="2" IsChecked="{x:Bind IsMuted, Mode=OneWay}" Content="{x:Bind IsMuted}" VerticalAlignment="Center" HorizontalAlignment="Center" IsEnabled="False"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <TextBlock Text="{x:Bind ViewModel.StatusMessage}" Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"/>
        </StackPanel>
    </Grid>
</Page>
